import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator
ComponentSourcing = Transition(label='Component Sourcing')
FrameAssembly = Transition(label='Frame Assembly')
MotorInstallation = Transition(label='Motor Installation')
SensorMounting = Transition(label='Sensor Mounting')
WiringSetup = Transition(label='Wiring Setup')
FirmwareUpload = Transition(label='Firmware Upload')
AI_Module = Transition(label='AI Module')
CalibrationPhase = Transition(label='Calibration Phase')
StressTesting = Transition(label='Stress Testing')
FlightSimulation = Transition(label='Flight Simulation')
PatternAdjustment = Transition(label='Pattern Adjustment')
QualityInspect = Transition(label='Quality Inspect')
ComplianceCheck = Transition(label='Compliance Check')
PackagingFinal = Transition(label='Packaging Final')
DeliverySetup = Transition(label='Delivery Setup')
skip = SilentTransition()
loop1 = OperatorPOWL(operator=Operator.LOOP, children=[ComponentSourcing, FrameAssembly, MotorInstallation, SensorMounting, WiringSetup, FirmwareUpload])
loop2 = OperatorPOWL(operator=Operator.LOOP, children=[CalibrationPhase, StressTesting, FlightSimulation, PatternAdjustment])
loop3 = OperatorPOWL(operator=Operator.LOOP, children=[QualityInspect, ComplianceCheck, PackagingFinal, DeliverySetup])
xor1 = OperatorPOWL(operator=Operator.XOR, children=[AI_Module, skip])
xor2 = OperatorPOWL(operator=Operator.XOR, children=[loop1, xor1])
xor3 = OperatorPOWL(operator=Operator.XOR, children=[loop2, xor2])
xor4 = OperatorPOWL(operator=Operator.XOR, children=[loop3, xor3])
root = StrictPartialOrder(nodes=[xor4])
root.order.add_edge(loop1, xor1)
root.order.add_edge(loop2, xor2)
root.order.add_edge(loop3, xor3)
root.order.add_edge(xor1, xor2)
root.order.add_edge(xor2, xor3)
root.order.add_edge(xor3, xor4)