import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

SiteSurvey = Transition(label='Site Survey')
StructureCheck = Transition(label='Structure Check')
SoilSample = Transition(label='Soil Sample')
WaterTest = Transition(label='Water Test')
CropSelection = Transition(label='Crop Selection')
MaterialOrder = Transition(label='Material Order')
PlanterSetup = Transition(label='Planter Setup')
IrrigationInstall = Transition(label='Irrigation Install')
SensorDeploy = Transition(label='Sensor Deploy')
SolarSetup = Transition(label='Solar Setup')
DataIntegration = Transition(label='Data Integration')
CommunityMeet = Transition(label='Community Meet')
TrainingSession = Transition(label='Training Session')
YieldMonitor = Transition(label='Yield Monitor')
AdjustPlan = Transition(label='Adjust Plan')

skip = SilentTransition()

site_assessment = OperatorPOWL(operator=Operator.XOR, children=[SiteSurvey, StructureCheck])
soil_water_test = OperatorPOWL(operator=Operator.XOR, children=[SoilSample, WaterTest])
crop_selection = OperatorPOWL(operator=Operator.XOR, children=[CropSelection, MaterialOrder])
plant_setup = OperatorPOWL(operator=Operator.XOR, children=[PlanterSetup, IrrigationInstall])
sensor_deploy = OperatorPOWL(operator=Operator.XOR, children=[SensorDeploy, SolarSetup])
data_integration = OperatorPOWL(operator=Operator.XOR, children=[DataIntegration, CommunityMeet])
training_session = OperatorPOWL(operator=Operator.XOR, children=[TrainingSession, YieldMonitor])
adjust_plan = OperatorPOWL(operator=Operator.XOR, children=[AdjustPlan, skip])

root = StrictPartialOrder(nodes=[site_assessment, soil_water_test, crop_selection, plant_setup, sensor_deploy, data_integration, training_session, adjust_plan])
root.order.add_edge(site_assessment, soil_water_test)
root.order.add_edge(site_assessment, crop_selection)
root.order.add_edge(soil_water_test, plant_setup)
root.order.add_edge(soil_water_test, sensor_deploy)
root.order.add_edge(crop_selection, data_integration)
root.order.add_edge(crop_selection, training_session)
root.order.add_edge(plant_setup, training_session)
root.order.add_edge(plant_setup, adjust_plan)
root.order.add_edge(sensor_deploy, data_integration)
root.order.add_edge(sensor_deploy, training_session)
root.order.add_edge(data_integration, adjust_plan)
root.order.add_edge(training_session, adjust_plan)