import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

Milk_Sourcing = Transition(label='Milk Sourcing')
Quality_Testing = Transition(label='Quality Testing')
Milk_Pasteurize = Transition(label='Milk Pasteurize')
Curd_Formation = Transition(label='Curd Formation')
Whey_Separation = Transition(label='Whey Separation')
Press_Cheese = Transition(label='Press Cheese')
Salt_Application = Transition(label='Salt Application')
Controlled_Aging = Transition(label='Controlled Aging')
Sensory_Check = Transition(label='Sensory Check')
Batch_Packaging = Transition(label='Batch Packaging')
Label_Printing = Transition(label='Label Printing')
Cold_Storage = Transition(label='Cold Storage')
Logistics_Plan = Transition(label='Logistics Plan')
Retail_Delivery = Transition(label='Retail Delivery')
Feedback_Review = Transition(label='Feedback Review')
Demand_Forecast = Transition(label='Demand Forecast')
Provenance_Track = Transition(label='Provenance Track')
skip = SilentTransition()
loop = OperatorPOWL(operator=Operator.LOOP, children=[Milk_Sourcing, Quality_Testing, Milk_Pasteurize, Curd_Formation, Whey_Separation, Press_Cheese, Salt_Application, Controlled_Aging])
xor = OperatorPOWL(operator=Operator.XOR, children=[Sensory_Check, Batch_Packaging])
loop2 = OperatorPOWL(operator=Operator.LOOP, children=[Label_Printing, Cold_Storage, Logistics_Plan, Retail_Delivery])
xor2 = OperatorPOWL(operator=Operator.XOR, children=[Feedback_Review, Demand_Forecast])
xor3 = OperatorPOWL(operator=Operator.XOR, children=[Provenance_Track, skip])
root = StrictPartialOrder(nodes=[loop, xor, loop2, xor2, xor3])
root.order.add_edge(loop, xor)
root.order.add_edge(loop, loop2)
root.order.add_edge(xor, loop2)
root.order.add_edge(xor, xor2)
root.order.add_edge(xor2, xor3)
root.order.add_edge(xor3, loop2)