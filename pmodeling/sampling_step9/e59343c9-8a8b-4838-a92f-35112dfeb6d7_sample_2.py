import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

Site_Survey = Transition(label='Site Survey')
Permit_Approval = Transition(label='Permit Approval')
Design_Layout = Transition(label='Design Layout')
System_Procure = Transition(label='System Procure')
Nutrient_Prep = Transition(label='Nutrient Prep')
Structure_Build = Transition(label='Structure Build')
Sensor_Install = Transition(label='Sensor Install')
Climate_Setup = Transition(label='Climate Setup')
Seed_Select = Transition(label='Seed Select')
Germinate_Seeds = Transition(label='Germinate Seeds')
Monitor_Growth = Transition(label='Monitor Growth')
Data_Analyze = Transition(label='Data Analyze')
Pest_Control = Transition(label='Pest Control')
Harvest_Crop = Transition(label='Harvest Crop')
Package_Goods = Transition(label='Package Goods')
Ship_Products = Transition(label='Ship Products')

skip = SilentTransition()

loop1 = OperatorPOWL(operator=Operator.LOOP, children=[Structure_Build, Nutrient_Prep])
loop2 = OperatorPOWL(operator=Operator.LOOP, children=[Sensor_Install, Climate_Setup])
loop3 = OperatorPOWL(operator=Operator.LOOP, children=[Seed_Select, Germinate_Seeds])
loop4 = OperatorPOWL(operator=Operator.LOOP, children=[Monitor_Growth, Data_Analyze])
loop5 = OperatorPOWL(operator=Operator.LOOP, children=[Pest_Control, Harvest_Crop])
loop6 = OperatorPOWL(operator=Operator.LOOP, children=[Package_Goods, Ship_Products])

xor1 = OperatorPOWL(operator=Operator.XOR, children=[loop1, skip])
xor2 = OperatorPOWL(operator=Operator.XOR, children=[loop2, skip])
xor3 = OperatorPOWL(operator=Operator.XOR, children=[loop3, skip])
xor4 = OperatorPOWL(operator=Operator.XOR, children=[loop4, skip])
xor5 = OperatorPOWL(operator=Operator.XOR, children=[loop5, skip])
xor6 = OperatorPOWL(operator=Operator.XOR, children=[loop6, skip])

root = StrictPartialOrder(nodes=[Site_Survey, Permit_Approval, Design_Layout, System_Procure, xor1, xor2, xor3, xor4, xor5, xor6])
root.order.add_edge(Site_Survey, Permit_Approval)
root.order.add_edge(Permit_Approval, Design_Layout)
root.order.add_edge(Design_Layout, System_Procure)
root.order.add_edge(System_Procure, xor1)
root.order.add_edge(xor1, loop1)
root.order.add_edge(loop1, loop2)
root.order.add_edge(loop2, loop3)
root.order.add_edge(loop3, loop4)
root.order.add_edge(loop4, loop5)
root.order.add_edge(loop5, loop6)
root.order.add_edge(loop6, xor6)
root.order.add_edge(xor6, xor5)
root.order.add_edge(xor5, xor4)
root.order.add_edge(xor4, xor3)
root.order.add_edge(xor3, xor2)
root.order.add_edge(xor2, xor1)
root.order.add_edge(xor1, Design_Layout)
root.order.add_edge(Design_Layout, System_Procure)