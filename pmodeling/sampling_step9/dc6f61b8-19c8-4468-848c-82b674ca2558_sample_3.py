import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

SiteSurvey = Transition(label='Site Survey')
EnergyPartner = Transition(label='Energy Partner')
PermitFiling = Transition(label='Permit Filing')
HydroUnit = Transition(label='Hydro Unit')
AISetup = Transition(label='AI Setup')
NutrientPlan = Transition(label='Nutrient Plan')
SystemInstall = Transition(label='System Install')
CropTesting = Transition(label='Crop Testing')
DataAnalysis = Transition(label='Data Analysis')
CommunityMeet = Transition(label='Community Meet')
YieldAdjust = Transition(label='Yield Adjust')
CarbonAudit = Transition(label='Carbon Audit')
LogisticsPlan = Transition(label='Logistics Plan')
QualityCheck = Transition(label='Quality Check')
ScaleReview = Transition(label='Scale Review')

skip = SilentTransition()
loop = OperatorPOWL(operator=Operator.LOOP, children=[SiteSurvey, EnergyPartner, PermitFiling])
xor = OperatorPOWL(operator=Operator.XOR, children=[HydroUnit, skip])
root = StrictPartialOrder(nodes=[loop, xor, AISetup, NutrientPlan, SystemInstall, CropTesting, DataAnalysis, CommunityMeet, YieldAdjust, CarbonAudit, LogisticsPlan, QualityCheck, ScaleReview])
root.order.add_edge(loop, xor)
root.order.add_edge(xor, AISetup)
root.order.add_edge(xor, NutrientPlan)
root.order.add_edge(xor, SystemInstall)
root.order.add_edge(xor, CropTesting)
root.order.add_edge(xor, DataAnalysis)
root.order.add_edge(xor, CommunityMeet)
root.order.add_edge(xor, YieldAdjust)
root.order.add_edge(xor, CarbonAudit)
root.order.add_edge(xor, LogisticsPlan)
root.order.add_edge(xor, QualityCheck)
root.order.add_edge(xor, ScaleReview)