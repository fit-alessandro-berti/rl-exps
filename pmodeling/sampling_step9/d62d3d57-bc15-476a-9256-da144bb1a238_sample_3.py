import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

SiteSurvey = Transition(label='Site Survey')
StructureAssess = Transition(label='Structure Assess')
SystemDesign = Transition(label='System Design')
CropSelect = Transition(label='Crop Select')
PermitObtain = Transition(label='Permit Obtain')
EnviroSetup = Transition(label='Enviro Setup')
IrrigationPlan = Transition(label='Irrigation Plan')
SensorInstall = Transition(label='Sensor Install')
AIcalibration = Transition(label='AI Calibration')
StaffTrain = Transition(label='Staff Train')
NutrientMix = Transition(label='Nutrient Mix')
PestMonitor = Transition(label='Pest Monitor')
YieldAnalyze = Transition(label='Yield Analyze')
MarketAlign = Transition(label='Market Align')
LaunchFarm = Transition(label='Launch Farm')
skip = SilentTransition()

SiteSurveyChoice = OperatorPOWL(operator=Operator.XOR, children=[SiteSurvey, StructureAssess])
StructureAssessChoice = OperatorPOWL(operator=Operator.XOR, children=[SystemDesign, CropSelect])
CropSelectChoice = OperatorPOWL(operator=Operator.XOR, children=[PermitObtain, EnviroSetup])
PermitObtainChoice = OperatorPOWL(operator=Operator.XOR, children=[IrrigationPlan, SensorInstall])
EnviroSetupChoice = OperatorPOWL(operator=Operator.XOR, children=[AIcalibration, StaffTrain])
IrrigationPlanChoice = OperatorPOWL(operator=Operator.XOR, children=[NutrientMix, PestMonitor])
SensorInstallChoice = OperatorPOWL(operator=Operator.XOR, children=[YieldAnalyze, MarketAlign])
AIcalibrationChoice = OperatorPOWL(operator=Operator.XOR, children=[LaunchFarm, skip])

root = StrictPartialOrder(nodes=[SiteSurveyChoice, StructureAssessChoice, CropSelectChoice, PermitObtainChoice, EnviroSetupChoice, IrrigationPlanChoice, SensorInstallChoice, AIcalibrationChoice])
root.order.add_edge(SiteSurveyChoice, StructureAssessChoice)
root.order.add_edge(StructureAssessChoice, CropSelectChoice)
root.order.add_edge(CropSelectChoice, PermitObtainChoice)
root.order.add_edge(PermitObtainChoice, EnviroSetupChoice)
root.order.add_edge(EnviroSetupChoice, IrrigationPlanChoice)
root.order.add_edge(IrrigationPlanChoice, SensorInstallChoice)
root.order.add_edge(SensorInstallChoice, AIcalibrationChoice)
root.order.add_edge(AIcalibrationChoice, LaunchFarm)