import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

Client_Meet = Transition(label='Client Meet')
Requirement_Gather = Transition(label='Requirement Gather')
Module_Design = Transition(label='Module Design')
Supplier_Vetting = Transition(label='Supplier Vetting')
Component_Order = Transition(label='Component Order')
Prototype_Build = Transition(label='Prototype Build')
Field_Testing = Transition(label='Field Testing')
Test_Analysis = Transition(label='Test Analysis')
Software_Setup = Transition(label='Software Setup')
Data_Integration = Transition(label='Data Integration')
Pilot_Train = Transition(label='Pilot Train')
Compliance_Check = Transition(label='Compliance Check')
Fleet_Deploy = Transition(label='Fleet Deploy')
Remote_Monitor = Transition(label='Remote Monitor')
Maintenance_Plan = Transition(label='Maintenance Plan')
Performance_Tune = Transition(label='Performance Tune')

skip = SilentTransition()
loop = OperatorPOWL(operator=Operator.LOOP, children=[Prototype_Build, Field_Testing])
xor = OperatorPOWL(operator=Operator.XOR, children=[Software_Setup, skip])
xor2 = OperatorPOWL(operator=Operator.XOR, children=[Pilot_Train, Compliance_Check])
xor3 = OperatorPOWL(operator=Operator.XOR, children=[Fleet_Deploy, Maintenance_Plan])
xor4 = OperatorPOWL(operator=Operator.XOR, children=[Remote_Monitor, Performance_Tune])
root = StrictPartialOrder(nodes=[Client_Meet, Requirement_Gather, Module_Design, Supplier_Vetting, Component_Order, Prototype_Build, Field_Testing, Test_Analysis, Software_Setup, Data_Integration, Pilot_Train, Compliance_Check, Fleet_Deploy, Remote_Monitor, Maintenance_Plan, Performance_Tune])
root.order.add_edge(Client_Meet, Requirement_Gather)
root.order.add_edge(Requirement_Gather, Module_Design)
root.order.add_edge(Module_Design, Supplier_Vetting)
root.order.add_edge(Supplier_Vetting, Component_Order)
root.order.add_edge(Component_Order, Prototype_Build)
root.order.add_edge(Prototype_Build, Field_Testing)
root.order.add_edge(Field_Testing, Test_Analysis)
root.order.add_edge(Test_Analysis, Software_Setup)
root.order.add_edge(Software_Setup, Data_Integration)
root.order.add_edge(Data_Integration, Pilot_Train)
root.order.add_edge(Pilot_Train, Compliance_Check)
root.order.add_edge(Compliance_Check, Fleet_Deploy)
root.order.add_edge(Fleet_Deploy, Remote_Monitor)
root.order.add_edge(Remote_Monitor, Maintenance_Plan)
root.order.add_edge(Maintenance_Plan, Performance_Tune)
root.order.add_edge(Performance_Tune, xor4)
root.order.add_edge(xor4, xor3)
root.order.add_edge(xor3, xor2)
root.order.add_edge(xor2, xor)
root.order.add_edge(xor, loop)