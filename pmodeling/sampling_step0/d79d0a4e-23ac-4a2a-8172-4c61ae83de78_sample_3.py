import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

spec_review = Transition(label='Spec Review')
component_pick = Transition(label='Component Pick')
frame_build = Transition(label='Frame Build')
motor_mount = Transition(label='Motor Mount')
sensor_fit = Transition(label='Sensor Fit')
wiring_setup = Transition(label='Wiring Setup')
software_load = Transition(label='Software Load')
calibration_test = Transition(label='Calibration Test')
stress_check = Transition(label='Stress Check')
firmware_flash = Transition(label='Firmware Flash')
feedback_loop = Transition(label='Feedback Loop')
package_prep = Transition(label='Package Prep')
doc_compile = Transition(label='Doc Compile')
ship_arrange = Transition(label='Ship Arrange')
remote_setup = Transition(label='Remote Setup')

spec_review_loop = OperatorPOWL(operator=Operator.LOOP, children=[spec_review])
component_pick_loop = OperatorPOWL(operator=Operator.LOOP, children=[component_pick])
frame_build_loop = OperatorPOWL(operator=Operator.LOOP, children=[frame_build])
motor_mount_loop = OperatorPOWL(operator=Operator.LOOP, children=[motor_mount])
sensor_fit_loop = OperatorPOWL(operator=Operator.LOOP, children=[sensor_fit])
wiring_setup_loop = OperatorPOWL(operator=Operator.LOOP, children=[wiring_setup])
software_load_loop = OperatorPOWL(operator=Operator.LOOP, children=[software_load])
calibration_test_loop = OperatorPOWL(operator=Operator.LOOP, children=[calibration_test])
stress_check_loop = OperatorPOWL(operator=Operator.LOOP, children=[stress_check])
firmware_flash_loop = OperatorPOWL(operator=Operator.LOOP, children=[firmware_flash])
feedback_loop_loop = OperatorPOWL(operator=Operator.LOOP, children=[feedback_loop])
package_prep_loop = OperatorPOWL(operator=Operator.LOOP, children=[package_prep])
doc_compile_loop = OperatorPOWL(operator=Operator.LOOP, children=[doc_compile])
ship_arrange_loop = OperatorPOWL(operator=Operator.LOOP, children=[ship_arrange])
remote_setup_loop = OperatorPOWL(operator=Operator.LOOP, children=[remote_setup])

xor1 = OperatorPOWL(operator=Operator.XOR, children=[spec_review_loop, component_pick_loop])
xor2 = OperatorPOWL(operator=Operator.XOR, children=[frame_build_loop, motor_mount_loop])
xor3 = OperatorPOWL(operator=Operator.XOR, children=[sensor_fit_loop, wiring_setup_loop])
xor4 = OperatorPOWL(operator=Operator.XOR, children=[software_load_loop, calibration_test_loop])
xor5 = OperatorPOWL(operator=Operator.XOR, children=[stress_check_loop, firmware_flash_loop])
xor6 = OperatorPOWL(operator=Operator.XOR, children=[feedback_loop_loop, package_prep_loop])
xor7 = OperatorPOWL(operator=Operator.XOR, children=[doc_compile_loop, ship_arrange_loop])
xor8 = OperatorPOWL(operator=Operator.XOR, children=[remote_setup_loop, xor6])

root = StrictPartialOrder(nodes=[xor1, xor2, xor3, xor4, xor5, xor6, xor7, xor8])
root.order.add_edge(xor1, xor2)
root.order.add_edge(xor2, xor3)
root.order.add_edge(xor3, xor4)
root.order.add_edge(xor4, xor5)
root.order.add_edge(xor5, xor6)
root.order.add_edge(xor6, xor7)
root.order.add_edge(xor7, xor8)

print(root)